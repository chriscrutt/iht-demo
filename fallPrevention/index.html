<!DOCTYPE html>
<html lang="en">

<!-- 
  1. [x] add intro
  2. [x] green button
  3. [x] previous
  4. [x] are you sure?
  5. [x] "finish"
  5. [ ] close
  6. [ ] reward
  7. [ ] progress bar
  8. [x] set video to 0 and pause it if they choose to go back once they get there
 ̶ ̶9̶.̶ ̶[̶ ̶]̶ ̶y̶e̶s̶/̶n̶o̶ ̶b̶u̶t̶t̶o̶n̶s̶ ̶s̶h̶o̶u̶l̶d̶ ̶s̶t̶a̶y̶ ̶i̶n̶ ̶s̶a̶m̶e̶ ̶s̶p̶o̶t̶
  10.[x] go back button should in same spot and lower
  11.[ ] put patient id in URL
  12.[ ] bigger font and less text
 -->

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description"
    content="Discover IHT's pro-active wellness solution that incentivizes healthy behavior in elderly patients through cash rewards. Request a demo to learn more about our user-friendly interface, versatile questionnaire, and effective follow-up and reward system.">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>IHT.tools</title>
  <link rel="shortcut icon" href="image/favicon.png" type="image/x-icon">
  <!-- Bootstrap , fonts & icons  -->
  <link rel="stylesheet" href="../css/bootstrap.css">
  <link href="https://fonts.googleapis.com/css2?family=Karla:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700;800;900&display=swap"
    rel="stylesheet">
  <!-- Plugin'stylesheets  -->
  <link rel="stylesheet" href="../plugins/aos/aos.min.css">
  <script src="https://player.vimeo.com/api/player.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <!-- Vendor stylesheets  -->
  <link rel="stylesheet" href="../css/main.css">
  <!-- Sweet Alerts -->
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-VMM3KZFGGE"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-VMM3KZFGGE');
  </script>
</head>

<body data-theme-mode-panel-active data-theme="light" style="font-family: 'Mazzard H';">
  <div class="site-wrapper overflow-hidden position-relative">
    <!-- Site Header -->
    <!-- Preloader -->
    <!-- <div id="loading">
    <div class="preloader">
     <img src="../image/preloader.gif" alt="preloader">
   </div>
   </div>    -->
    <!--Site Header Area -->
    <header style="background-color: #466EB6;"
      class="site-header site-header--menu-right landing-14-menu site-header--absolute site-header--sticky">
      <div class="container">
        <nav style=" height: 92px;" class="navbar site-navbar">
          <!-- Brand Logo-->
          <div class="brand-logo">
            <a href="#">
              <!-- <img src="image/logo/logo-black.png" alt=""> -->
              <h1 style="font-family: Rubik; color: #ffffff;" class="nav-link-item">IHT - Wellness Wallet</h1>
            </a>
          </div>
        </nav>
      </div>
    </header>
    <!-- navbar- -->
    <!-- Hero Area -->
    <div class="testFhir position-relative z-index-1 overflow-hidden">
      <div class="container" style="text-align: center;">
        <div class="row position-relative justify-content-center">
          <div class="col-md-10 pr-0" style="width:auto;">
            <form id="myForm" method="type">
              <div id="questionnaire-form" class="trans">
                <div id="question" class="trans">
                  <p>Do you have a problem with your balance?</p>
                </div>
                <div id="choices">
                  <div class="btn trans" id="Yes" value="Yes" onclick="checkAnswer('yes')"
                    style="font-size: 2em;padding:0.75em 0.25em 0.75em 0.25em;">Yes</div>
                  <div class="btn trans" id="No" value="No" onclick="checkAnswer('no')"
                    style="font-size: 2em;padding:0.75em 0.25em 0.75em 0.25em;">No</div>
                </div>
              </div>

              <div id="video" class="trans">
                <h1 style="color: #466EB6; width: 50vw;">Now, watch this quick video to learn more about fall
                  prevention.</h1>
                <!-- <h3>Now, watch this quick video to learn more about fall prevention.</h3> -->
                <div id="player" style="display: block; padding-bottom: 1vh;">
                  <video id="video1" style="height:50vh;" controls>
                    <source src="../video/sixSteps.mp4" type="video/mp4">
                    Your browser does not support HTML video.
                  </video>
                </div>
                <button class="btn" type="submit"
                  style="font-size: 2em;padding:0.75em 0.25em 0.75em 0.25em;">Continue</button>
              </div>
              <div class="btn" id="prevAnswer" class="trans" onclick="prevAnswer()"
                style="margin-top: 1vh;position: fixed;bottom: 5vh;left: 45vw;right: 45vw;opacity:0;">Go
                Back</div>
            </form>
          </div>
        </div>
      </div>
      <div style="height: 100vh;display:none;" id="end"
        class="hero-area-l-14 position-relative z-index-1 overflow-hidden trans">
        <div class="container">
          <div class="row position-relative justify-content-center">
            <div class="col-xl-5 col-lg-6 col-md-8 col-sm-10 pr-0 aos-init aos-animate" data-aos="fade-right"
              data-aos-duration="800" data-aos-once="true" style="width: 75vw;">
              <div class="content">
                <h1 style="color:#466EB6;font-size: 5em;">Remember:</h1>
                <h2 style="font-size: 3em;" class="tape-helper mb4">If you feel you're at risk, talk to your Doctor
                  about the following:</h2>
                <ul>
                  <h2 style="font-size: 2.9em;"><i>✔</i> Using a cane or walker</h2>
                  <h2 style="font-size: 2.9em;"><i>✔</i> Physical therapy programs</h2>
                  <h2 style="font-size: 2.9em;"><i>✔</i> Any medical conditions that might be causing it</h2>
                </ul>
                <a class="btn center" style="font-size: 2em;padding:0.75em 0.25em 0.75em 0.25em;" onclick="finish()">Submit</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <footer>
        Incentive Health Technologies, LLC
      </footer>
    </div>
  </div>
  <!-- Footer Area -->
  <!-- Vendor Scripts -->
  <script src="js/vendor.min.js"></script>
  <script src="../plugins/aos/aos.min.js"></script>
  <script src="../plugins/menu/menu.js"></script>
  <!-- Activation Script -->
  <script src="js/custom.js"></script>
  <style>
    .center {
      margin-top: 5vh !important;
      position: absolute;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    ul h2 {
      font-weight: 200;
    }

    h2 i {
      background-color: #72e297;
      color: #FFF;
      font-size: 2.5rem;
      padding: 5px 12px;
      margin-right: 10px;
      border-radius: 50%;
    }

    .testFhir footer {
      border-top: 0;
    }

    body {
      background-image: url("../image/l4/background-1920x1080.png");
    }

    .btn:hover {
      background: #466eb6 !important;
      color: #fff !important;
    }

    .btn {
      background: #fff !important;
      border: 2px solid #466eb6 !important;
      color: #466eb6 !important;
      padding: 25px;
      font-size: 1em;
    }

    p {
      color: #466EB6;
    }

    * {
      font-family: Rubik;
      color: #466EB6;
    }

    #questionnaire-form {
      width: 40vw;
      height: 40vh;
      font-size: 2em;
    }

    .testFhir {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      padding-top: 0;
      background-color: #ffffff00;
    }

    .swal-title {
      font-size: 7vh;
    }

    .swal-text {
      font-size: 3vh;
    }

    .swal-button--cancel {
      background-color: rgb(45, 184.5, 45);
      color: #fff;
    }

    .swal-button--cancel:hover {
      background-color: rgb(42.5, 174.25, 42.5) !important;
    }

    .trans {
      transition: opacity 0.5s ease-in-out;
      /* opacity: 0; */
    }
  </style>
  <script>

    const player = document.getElementById("video1");
    var perc = 0;
    const form = document.querySelector('#myForm');
    form.addEventListener('submit', (event) => {
      event.preventDefault();
      perc = player.currentTime / player.duration;
      if (perc < 1) {
        player.pause();
        swal({
          title: "Resume Video?",
          text: `You have only watched ${Math.round(perc * 100)}% of the video. If you continue, you might miss out on the reward at the end. Would you like to resume the video?`,
          // icon: "warning",
          buttons: ["Resume Video", "Move On"],
          dangerMode: true,
        })
          .then((submit) => {
            if (!submit) {
              player.play();
            } else {
              // answer(perc);
              goToEnd();
            }
          });
      } else {
        // answer(perc);
        goToEnd();
      }
    });

    function answer(percc) {
      answers = [];
      for (let i = 0; i < questions.length; i++) {
        answers.push(questions[i].answer);
      }
      answers.push(percc);
      // console.log(answers); // log the object containing all the answers to the console
      return answers
    }

    function finish() {
      console.log(answer(perc));
      window.location.href = "../submitted"
    }

    const question = document.getElementById("question");
    const choiceA = document.getElementById("Yes");
    const choiceB = document.getElementById("No");
    const prev = document.getElementById("prevAnswer");

    // create our questions
    let questions = [
      {
        question: "Do you have a problem with your balance?",
        choiceA: "Yes",
        choiceB: "No",
        answer: "",
      },
      {
        question: "Have you fallen in the past year?",
        choiceA: "Yes",
        choiceB: "No",
        answer: "",
      },
      {
        question: "Have you talked to a doctor about falling in the past year?",
        choiceA: "Yes",
        choiceB: "No",
        answer: "",
      }

    ];

    // create some variables
    const lastQuestion = questions.length;
    var runningQuestion = 0;

    // Modify renderQuestion function
    function renderQuestion() {
      question.style.opacity = 0;
      choiceA.style.opacity = 0;
      choiceB.style.opacity = 0;
      prev.style.display = "flex";
      setTimeout(function () {
        let q = questions[runningQuestion];
        question.innerHTML = "<p style=\"font-size:2em;\">" + q.question + "</p>";
        choiceA.innerHTML = q.choiceA;
        choiceB.innerHTML = q.choiceB;

        if (runningQuestion > 0) {
          prev.style.opacity = 1;
          prev.style.cursor = "pointer";
          question.style.opacity = 1;
          choiceA.style.opacity = 1;
          choiceB.style.opacity = 1;
        } else {
          prev.style.opacity = 0;
          question.style.opacity = 1;
          choiceA.style.opacity = 1;
          choiceB.style.opacity = 1;
          setTimeout(function () {
            prev.style.display = "none";
          }, 500);
        }
      }, 500);
    }

    const vidBlock = document.getElementById("video");

    function prevAnswer() {
      document.getElementById("end").style.display = "none";
      player.pause();
      if (runningQuestion != 0) {
        runningQuestion--;
      }
      if (runningQuestion < lastQuestion) {
        renderQuestion();
        vidBlock.style.opacity = 0;
        setTimeout(function () {
          vidBlock.style.display = "none";
          player.pause();
          player.currentTime = 0;
          document.getElementById("questionnaire-form").style.display = "table-cell";
          document.getElementById("questionnaire-form").style.opacity = 1;
          // setTimeout(function () {
          // }, 500);
        }, 500);
      } else if (runningQuestion == lastQuestion) {
        document.getElementById("questionnaire-form").style.opacity = 0;
        document.getElementById("end").style.opacity = 0;
        setTimeout(function () {
          document.getElementById("questionnaire-form").style.display = "none";
          document.getElementById("end").style.display = "none";
          player.currentTime = 0;
          player.play();
          vidBlock.style.display = "block";
          vidBlock.style.opacity = 1;
          renderQuestion();
        }, 500);
      }
    }

    function checkAnswer(answer) {
      questions[runningQuestion].answer = answer;
      runningQuestion++;
      if (runningQuestion == lastQuestion) {
        question.style.opacity = 0;
        choiceA.style.opacity = 0;
        choiceB.style.opacity = 0;
        videoShown = true;
        setTimeout(function () {
          document.getElementById("questionnaire-form").style.display = "none";
          setTimeout(function () {
            vidBlock.style.display = "block";
            setTimeout(function () {
              vidBlock.style.opacity = 1;
              player.play();
            }, 250);
          }, 250);
        }, 500);
      } else if (runningQuestion < lastQuestion) {
        renderQuestion();
      }
    }

    function goToEnd() {
      vidBlock.style.display = "none";
      document.getElementById("end").style.display = "block";
      document.getElementById("end").style.opacity = 1;
      runningQuestion++;
    }

    window.onload = (event) => {
      renderQuestion();
    };

    // Attach the event listener to the window object
    window.addEventListener('beforeunload', function (e) {
      // Cancel the event to prevent the page from refreshing/closing immediately
      e.preventDefault();
      // Chrome requires the returnValue property to be set
      e.returnValue = '';

      // Display the confirmation dialog
      var confirmationMessage = 'Are you sure you want to leave this page?';
      (e || window.event).returnValue = confirmationMessage; // For legacy browsers

      // Return the confirmation message
      return confirmationMessage;
    });

    // Attach the event listener to the window object
    window.addEventListener('onbeforeunload', function (e) {
      // Cancel the event to prevent the page from refreshing/closing immediately
      e.preventDefault();
      // Chrome requires the returnValue property to be set
      e.returnValue = '';

      // Display the confirmation dialog
      var confirmationMessage = 'Are you sure you want to leave this page?';
      (e || window.event).returnValue = confirmationMessage; // For legacy browsers

      // Return the confirmation message
      return confirmationMessage;
    });

  </script>
</body>

</html>